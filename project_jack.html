<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>jack In Box Physics Simulation</title>
    <script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js">
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #4a5568;
            background: #f7fafc;
            overflow-x: hidden;
            margin: 0;
            padding: 0;
            width: 100%;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            width: 100%;
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: #4a5568;
            z-index: 1000;
            padding: 15px 0;
            transition: all 0.3s ease;
            box-sizing: border-box;
        }

        .nav-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: #fff;
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }

        .nav-links a {
            color: #fff;
            text-decoration: none;
            transition: color 0.3s ease;
            position: relative;
        }

        .nav-links a:hover {
            color: #cbd5e0;
        }

        .back-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 8px 16px;
            background: #2d3748;
            color: #fff !important;
            border-radius: 6px;
            font-size: 0.9rem;
            transition: background 0.3s ease;
        }

        .back-link:hover {
            background: #1a202c;
            color: #fff !important;
        }

        /* Project Hero */
        .project-hero {
            padding: 120px 0 80px;
            background: #edf2f7;
            text-align: center;
        }

        .project-hero h1 {
            font-size: 3.5rem;
            color: #2d3748;
            margin-bottom: 1rem;
        }

        .project-type {
            color: #4a5568;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 1.5rem;
        }

        .project-summary {
            font-size: 1.3rem;
            color: #4a5568;
            max-width: 800px;
            margin: 0 auto 2rem;
            line-height: 1.7;
        }

        .project-meta {
            display: flex;
            justify-content: center;
            gap: 3rem;
            flex-wrap: wrap;
            margin-bottom: 3rem;
        }

        .meta-item {
            text-align: center;
        }

        .meta-label {
            font-size: 0.9rem;
            color: #718096;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 0.5rem;
        }

        .meta-value {
            font-size: 1.1rem;
            color: #2d3748;
            font-weight: 600;
        }

        .tech-stack {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-top: 2rem;
        }

        .tech-tag {
            padding: 8px 16px;
            background: #e2e8f0;
            color: #4a5568;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        /* Main Content */
        .project-content {
            padding: 80px 0;
            background: #fff;
        }

        .main-content {
            max-width: none;
        }

        .section {
            margin-bottom: 4rem;
        }

        .section h2 {
            font-size: 2.5rem;
            color: #2d3748;
            margin-bottom: 2rem;
            border-bottom: 3px solid #4a5568;
            padding-bottom: 1rem;
        }

        .section p {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 1.5rem;
        }

        /* Video Container */
        .video-container {
            position: relative;
            width: 100%;
            height: 0;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            margin: 2rem 0;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(74, 85, 104, 0.15);
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        /* Design Subsections */
        .design-subsection {
            margin-bottom: 4rem;
            padding-bottom: 3rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .design-subsection:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .subsection-content {
            display: grid;
            gap: 3rem;
            align-items: start;
        }

        /* Right aligned image */
        .subsection-content.right-image {
            grid-template-columns: 2fr 1fr;
        }

        /* Left aligned image */
        .subsection-content.left-image {
            grid-template-columns: 1fr 2fr;
        }

        /* Top aligned image */
        .subsection-content.top-image {
            grid-template-columns: 1fr;
        }

        .subsection-text h3 {
            color: #2d3748;
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            border-left: 4px solid #4a5568;
            padding-left: 1.5rem;
        }

        .subsection-text p {
            font-size: 1.1rem;
            line-height: 1.7;
            margin-bottom: 1.5rem;
        }

        .subsection-image {
            position: relative;
        }

        .subsection-content.right-image .subsection-image,
        .subsection-content.left-image .subsection-image {
            width: 100%;
            height: 300px;
        }

        .subsection-content.top-image .subsection-image {
            width: 100%;
            height: 350px;
            max-width: 700px;
            margin: 0 auto;
        }

        .subsection-image img {
            width: 100%;
            height: 100%;
            object-fit: scale-down;
            object-position: center;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(74, 85, 104, 0.15);
            transition: transform 0.3s ease;
        }

        .subsection-image img:hover {
            transform: scale(1.02);
        }

        .image-caption {
            margin-top: 1rem;
            font-size: 0.95rem;
            color: #718096;
            font-style: italic;
            text-align: center;
            padding: 0 1rem;
        }

        .subsection-image img:hover {
            transform: scale(1.02);
        }

        .image-caption {
            margin-top: 1rem;
            font-size: 0.95rem;
            color: #718096;
            font-style: italic;
            text-align: center;
            padding: 0 1rem;
        }

        /* Results/Outcomes */
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin: 3rem 0;
        }

        .result-item {
            text-align: center;
            padding: 2.5rem;
            background: #f7fafc;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
        }

        .result-number {
            font-size: 3.5rem;
            font-weight: 700;
            color: #2d3748;
            line-height: 1;
            margin-bottom: 0.5rem;
        }

        .result-label {
            color: #4a5568;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Navigation between projects */
        .project-nav {
            background: #edf2f7;
            padding: 60px 0;
            text-align: center;
        }

        .project-nav-links {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 800px;
            margin: 0 auto;
            gap: 2rem;
        }

        .project-nav-link {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1.5rem 2rem;
            background: #fff;
            color: #4a5568;
            text-decoration: none;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
            flex: 1;
            max-width: 300px;
        }

        .project-nav-link:hover {
            background: #f7fafc;
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(74, 85, 104, 0.1);
        }

        .project-nav-link.next {
            flex-direction: row-reverse;
            text-align: right;
        }

        .nav-arrow {
            font-size: 1.5rem;
        }

        .nav-text {
            flex: 1;
        }

        .nav-label {
            font-size: 0.8rem;
            color: #718096;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .nav-title {
            font-size: 1.1rem;
            color: #2d3748;
            font-weight: 600;
            margin-top: 0.3rem;
        }

        /* Footer */
        footer {
            background: #4a5568;
            color: #fff;
            text-align: center;
            padding: 3rem 0;
        }

        footer h3 {
            margin-bottom: 1rem;
        }

        footer p {
            margin-bottom: 2rem;
            opacity: 0.8;
        }

        .footer-link {
            color: #fff;
            text-decoration: none;
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            display: inline-block;
            transition: background 0.3s ease;
        }

        .footer-link:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        .center {
             display: block;
            margin-left: auto;
            margin-right: auto;
            width: 50%;
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .nav-links {
                gap: 1rem;
            }

            .nav-links a:not(.back-link) {
                display: none;
            }

            .project-hero h1 {
                font-size: 2.5rem;
            }

            .project-meta {
                gap: 2rem;
            }

            .subsection-content.right-image,
            .subsection-content.left-image {
                grid-template-columns: 1fr;
            }

            .subsection-content.left-image .subsection-image {
                order: -1;
            }

            .video-container {
                padding-bottom: 75%;
            }

            .project-nav-links {
                flex-direction: column;
            }

            .project-nav-link {
                max-width: none;
            }

            .project-nav-link.next {
                flex-direction: row;
                text-align: left;
            }

            .results-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .section h2 {
                font-size: 2rem;
            }

            .subsection-text h3 {
                font-size: 1.5rem;
            }
        }

        /* Smooth scroll behavior */
        html {
            scroll-behavior: smooth;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f7fafc;
        }

        ::-webkit-scrollbar-thumb {
            background: #4a5568;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #2d3748;
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav>
        <div class="container">
            <div class="nav-content">
                <a href="index.html" class="logo">Kevin Monjarrez</a>
                <ul class="nav-links">
                    <li><a href="index.html#about">About</a></li>
                    <li><a href="index.html#projects">Projects</a></li>
                    <li><a href="index.html#contact">Contact</a></li>
                    <li><a href="resume.html">Resume</a></li>
                    <li><a href="index.html" class="back-link">← Back to Portfolio</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Project Hero -->
    <section class="project-hero">
        <div class="container">
            <p class="project-type">Mechanical Modeling and Simulation</p>
            <h1>Jack In Box Physics Simualtion</h1>
            <p class="project-summary">
                 Jack in Box Simulation utilizing sympy symbolic math and Lagrangian mechanics. 
            </p>
        </div>
    </section>

    <!-- Main Content -->
    <section class="project-content">
        <div class="container">
            <div class="main-content">
                <!-- Background -->
              
                <div class="section">
                    <h2>Overview</h2>
                    <div class="video-container">
                        <iframe 
                            src="img/jackbox-simv2.mp4" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen>
                        </iframe>
                    </div>
                    <p>
                        This project simulates a "Jack-In-Box" system using Lagrangian mechanics and symbolic mathematics. 
                        The jack resides inside a box, both influenced by gravity, while the box also experiences sinusoidal external 
                        forces and torque. By varying parameters (such as mass, force amplitude, or moment of inertia), 
                        we can observe different dynamic behaviors. Both the jack and the box start at rest, and their interaction 
                        is governed by the Euler-Lagrange equations derived from the system's kinetic and potential energy. 
                    </p>
                </div>

<div class="section">
   <h3>Coordinate Transformations</h3>
    <p>
        Each jack and the box is represented as a rigid body using homogeneous transformation matrices:
    </p>
    <p class="math">
        $$ g = \begin{bmatrix} R & p \\ 0 & 1 \end{bmatrix} $$
    </p>
    <p>
        where R is the 2D rotation matrix representing orientation, and p is the position vector. 
        Local frames for each jack and the box are composed to express positions in the world frame, 
        allowing constraints and interactions to be expressed consistently. 
    </p>
    <div class="diagram-placeholder">
        <img src="img/Jack Box Frames.png" alt="Jack-in-the-Box coordinate frames and transformations" class="center"/>
        <p style="text-align: center;"><em>Diagram of local frames and world-frame composition of jack and box</em></p>
    </div>
</div>


<div class="section">
            <h2>Governing Equations</h2>

    <h3>Lagrangian Mechanics</h3>
    <p>
        Motion is derived from the Lagrangian <span class="math">\( L = KE - PE \)</span>, where <em>KE</em> is kinetic energy and <em>PE</em> is gravitational potential energy.
        Spatial velocity vectors are used (<span class="math">\( V = M6 \text{ representation of } \dot{g} g^{-1} \)</span>), and <span class="math">\( KE = \frac{1}{2} V^\top I V \)</span>.
        Euler-Lagrange equations govern the motion:
    </p>
    <p class="math">
        $$ \frac{d}{dt}\left(\frac{\partial L}{\partial \dot{q}}\right) - \frac{\partial L}{\partial q} = F $$
    </p>

    <h3>Hamiltonian</h3>
    <p>
        The Hamiltonian, a representation of total energy, is used for impact handling:
    </p>
    <p class="math">
        $$ H = \dot{q}^\top \frac{\partial L}{\partial \dot{q}} - L $$
        $$ \dot{q}^{+} - \dot{q}^{-} = \phi_q^\top \lambda $$
    </p>

    <h3>Constraints and Impacts</h3>
    <p>
        Geometric relationships between jacks and box boundaries are expressed as algebraic constraints:
    </p>
    <p class="math">
        $$ \phi_i(q) = 0 $$
    </p>
    <p>
        Post-impact velocities are updated using Lagrange multipliers:
    </p>
    <p class="math">
        $$ \dot{q}^{+} - \dot{q}^{-} = \phi_q^\top \lambda $$
    </p>


<!-- Numerical Integration -->
    <h3>Numerical Integration</h3>
    <p>
        Time integration uses a 4th-order Runge-Kutta (RK4) scheme. The simulation loop integrates motion, checks for collisions 
        via constraint functions, and applies post-impact updates using Hamiltonian-based impulse equations.
    </p>
</div>

<!-- Tools and Techniques -->
<div class="section">
    <h2>Tools and Techniques</h2>
    <ul>
        <li><strong>Python Libraries:</strong> sympy (symbolic derivation), numpy (numerical evaluation), matplotlib (plots), plotly (animation).</li>
        <li><strong>Mathematical Techniques:</strong> Lagrangian mechanics, Hamiltonian formulation, coordinate transformations, constraint enforcement, impulsive impact dynamics, RK4 integration.</li>
        <li><strong>Mechanical Modeling:</strong> Multi-body rigid bodies with translational and rotational degrees of freedom, collision detection, constraint propagation.</li>
    </ul>
</div>

<!-- Key Outcomes -->
<div class="section">
    <h2>Results</h2>
    <p>
        The simulation successfully produced realistic trajectories for both the jacks and the box, capturing both smooth motion and abrupt changes due to impacts. 
        By deriving the dynamics symbolically, the system could enforce constraints accurately and respond to collisions in real time, providing insights into multi-body interactions that would be difficult to measure experimentally.
    </p>
    <p>
        Interactive visualizations allowed for detailed analysis of translational and rotational motion, demonstrating the effectiveness of the Lagrangian and Hamiltonian formulations in modeling complex mechanical behavior. 
        Overall, the project established a flexible, modular framework that can be extended to more sophisticated mechanical systems, control strategies, or simulations involving multiple colliding bodies.
    </p>
</div>



    <script>
        // Add scroll effect to navigation
        window.addEventListener('scroll', () => {
            const nav = document.querySelector('nav');
            if (window.scrollY > 100) {
                nav.style.background = '#2d3748';
            } else {
                nav.style.background = '#4a5568';
            }
        });

        // Add intersection observer for animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        // Observe all sections for scroll animations
        document.querySelectorAll('.section').forEach(section => {
            section.style.opacity = '0';
            section.style.transform = 'translateY(30px)';
            section.style.transition = 'opacity 0.8s ease, transform 0.8s ease';
            observer.observe(section);
        });
    </script>
</body>
</html>